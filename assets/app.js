angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope","$location","$window","UserSvc",function(e,t,n,o){if(e.$on("login",function(n,o){e.currentUser=o,t.path("/")}),e.logout=function(){delete e.currentUser,t.path("/"),window.sessionStorage.removeItem("token")},o.isLoggedIn()){o.getUser().then(function(t){e.currentUser=t})}}]),angular.module("app").controller("AskCtrl",["$scope","QuestSvc",function(e,t){e.addQuestion=function(){e.postBody&&t.create({username:e.currentUser.username,body:e.postBody}).success(function(t){e.questions.unshift(t),e.postBody=null})},t.fetch().success(function(t){e.questions=t})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(e,t){e.login=function(n,o){e.errorMsg="",t.login(n,o).then(function(t){e.$emit("login",t)},function(){e.errorMsg="Incorrect username/password."})}}]),angular.module("app").controller("QuestCtrl",["$scope","QuestSvc","$location",function(e,t,n){e.addQuestion=function(){e.postBody&&t.create({username:e.currentUser.username,title:e.title,body:e.postBody,answersCount:0,upvote:0,downvote:0}).success(function(t){e.questions.unshift(t),e.postBody=null,n.path("/")})},e.askQuestionView=function(){n.path("/ask")},t.fetch().success(function(t){e.questions=t}),e.getQuestionById=function(n){t.fetchById(n).then(function(t){e.quest=t})},e.addAnswer=function(){console.log("answering")}}]),angular.module("app").service("QuestSvc",["$http",function(e){this.fetch=function(){return e.get("/api/questions")},this.fetchById=function(t){return e.get("/api/questions/"+t)},this.create=function(t){return e.post("/api/questions",t)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(e,t){e.register=function(n,o){t.register(n,o).then(function(t){e.$emit("login",t)})}}]),angular.module("app").config(["$routeProvider",function(e){e.when("/",{controller:"QuestCtrl",templateUrl:"/templates/questions.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"/templates/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"/templates/login.html"}).when("/ask",{controller:"QuestCtrl",templateUrl:"/templates/ask.html"}).when("/questions/:questId",{controller:"SingleQuestCtrl",templateUrl:"/templates/quest.html"})}]),angular.module("app").controller("SingleQuestCtrl",["$scope","$routeParams","SingleQuestSvc","$location",function(e,t,n){n.fetchById(t.questId).then(function(t){console.log(t),e.quest=t.data}),e.addAnswer=function(){console.log("answering")}}]),angular.module("app").service("SingleQuestSvc",["$http",function(e){this.fetchById=function(t){return e.get("/api/questions/"+t)}}]),angular.module("app").service("UserSvc",["$http",function(e){var t=this;t.getUser=function(){return e.get("/api/users").then(function(e){return e.data})},t.login=function(n,o){return e.post("/api/sessions",{username:n,password:o}).then(function(n){return window.sessionStorage.token=n.data,e.defaults.headers.common["x-auth"]=n.data,t.getUser()})},t.register=function(n,o){return e.post("/api/users",{username:n,password:o}).then(function(){return t.login(n,o)})},t.isLoggedIn=function(){var t=!1;return window.sessionStorage.token&&(e.defaults.headers.common["x-auth"]=window.sessionStorage.token,t=!0),t}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJhc2suY3RybC5qcyIsImxvZ2luLmN0cmwuanMiLCJxdWVzdC5jdHJsLmpzIiwicXVlc3Quc3ZjLmpzIiwicmVnaXN0ZXIuY3RybC5qcyIsInJvdXRlcy5qcyIsInNpbmdsZXF1ZXN0LmN0cmwuanMiLCJzaW5nbGVxdWVzdC5zdmMuanMiLCJ1c2VyLnN2Yy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRsb2NhdGlvbiIsIiR3aW5kb3ciLCJVc2VyU3ZjIiwiJG9uIiwiXyIsInVzZXIiLCJjdXJyZW50VXNlciIsInBhdGgiLCJsb2dvdXQiLCJ3aW5kb3ciLCJzZXNzaW9uU3RvcmFnZSIsInJlbW92ZUl0ZW0iLCJpc0xvZ2dlZEluIiwiZ2V0VXNlciIsInRoZW4iLCJyZXNwb25zZSIsIlF1ZXN0U3ZjIiwiYWRkUXVlc3Rpb24iLCJwb3N0Qm9keSIsImNyZWF0ZSIsInVzZXJuYW1lIiwiYm9keSIsInN1Y2Nlc3MiLCJxdWVzdGlvbiIsInF1ZXN0aW9ucyIsInVuc2hpZnQiLCJmZXRjaCIsImxvZ2luIiwicGFzc3dvcmQiLCJlcnJvck1zZyIsIiRlbWl0IiwidGl0bGUiLCJhbnN3ZXJzQ291bnQiLCJ1cHZvdGUiLCJkb3dudm90ZSIsImFza1F1ZXN0aW9uVmlldyIsImdldFF1ZXN0aW9uQnlJZCIsImlkIiwiZmV0Y2hCeUlkIiwicXVlc3QiLCJhZGRBbnN3ZXIiLCJjb25zb2xlIiwibG9nIiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImdldCIsInBvc3QiLCJyZWdpc3RlciIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiJHJvdXRlUGFyYW1zIiwiU2luZ2xlUXVlc3RTdmMiLCJxdWVzdElkIiwiZGF0YSIsInN2YyIsInRva2VuIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwicmVzdWx0Il0s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Q0VkLEVBQUFlLFNBQUFDLFFBQUFDLE9BQUEsVUFBQXBELE9BQUFDLGVBQUFnRCxNQUNBSSxHQUFBLEdBRUZBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICduZ1JvdXRlJ1xuXSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJHdpbmRvdywgVXNlclN2Yykge1xuICAkc2NvcGUuJG9uKCdsb2dpbicsIGZ1bmN0aW9uIChfLCB1c2VyKSB7XG4gICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gdXNlclxuICAgICRsb2NhdGlvbi5wYXRoKCcvJylcbiAgfSlcblxuICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcbiAgXHRkZWxldGUoJHNjb3BlLmN1cnJlbnRVc2VyKSBcbiAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJylcbiAgfVxuXG4gIGlmKFVzZXJTdmMuaXNMb2dnZWRJbigpKXtcblx0ICBcdHZhciB1c2VyID0gVXNlclN2Yy5nZXRVc2VyKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0ICAgICRzY29wZS5jdXJyZW50VXNlciA9IHJlc3BvbnNlO1xuXHQgIFx0fSlcbiBcdH1cblxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0Fza0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBRdWVzdFN2Yykge1xuICAkc2NvcGUuYWRkUXVlc3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCRzY29wZS5wb3N0Qm9keSkge1xuICAgICAgUXVlc3RTdmMuY3JlYXRlKHtcbiAgICAgICAgdXNlcm5hbWU6ICRzY29wZS5jdXJyZW50VXNlci51c2VybmFtZSxcbiAgICAgICAgYm9keTogICAgICRzY29wZS5wb3N0Qm9keVxuICAgICAgfSlcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChxdWVzdGlvbikge1xuICAgICAgICAkc2NvcGUucXVlc3Rpb25zLnVuc2hpZnQocXVlc3Rpb24pXG4gICAgICAgICRzY29wZS5wb3N0Qm9keSA9IG51bGxcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgUXVlc3RTdmMuZmV0Y2goKVxuICAuc3VjY2VzcyhmdW5jdGlvbiAocXVlc3Rpb25zKSB7XG4gICAgJHNjb3BlLnF1ZXN0aW9ucyA9IHF1ZXN0aW9uc1xuICB9KVxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU3ZjKSB7XG4gICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgXHQkc2NvcGUuZXJyb3JNc2cgPSAnJztcbiAgICBVc2VyU3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicsIHVzZXIpXG4gICAgfSwgZnVuY3Rpb24oZXJyb3Ipe1xuICAgIFx0JHNjb3BlLmVycm9yTXNnID0gXCJJbmNvcnJlY3QgdXNlcm5hbWUvcGFzc3dvcmQuXCI7XG4gICAgfSlcbiAgfVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1F1ZXN0Q3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFF1ZXN0U3ZjLCAkbG9jYXRpb24pIHtcbiAgJHNjb3BlLmFkZFF1ZXN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICgkc2NvcGUucG9zdEJvZHkpIHtcbiAgICAgIFF1ZXN0U3ZjLmNyZWF0ZSh7XG4gICAgICAgIHVzZXJuYW1lOiAkc2NvcGUuY3VycmVudFVzZXIudXNlcm5hbWUsXG4gICAgICAgIHRpdGxlOiAgICAkc2NvcGUudGl0bGUsXG4gICAgICAgIGJvZHk6ICAgICAkc2NvcGUucG9zdEJvZHksXG4gICAgICAgIGFuc3dlcnNDb3VudDogMCxcbiAgICAgICAgdXB2b3RlOiAgIDAsXG4gICAgICAgIGRvd252b3RlOiAwXG4gICAgICB9KVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHF1ZXN0aW9uKSB7XG4gICAgICAgICRzY29wZS5xdWVzdGlvbnMudW5zaGlmdChxdWVzdGlvbilcbiAgICAgICAgJHNjb3BlLnBvc3RCb2R5ID0gbnVsbFxuICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gICRzY29wZS5hc2tRdWVzdGlvblZpZXcgPSBmdW5jdGlvbigpe1xuICAgICRsb2NhdGlvbi5wYXRoKCcvYXNrJyk7XG4gIH1cblxuICBRdWVzdFN2Yy5mZXRjaCgpXG4gIC5zdWNjZXNzKGZ1bmN0aW9uIChxdWVzdGlvbnMpIHtcbiAgICAkc2NvcGUucXVlc3Rpb25zID0gcXVlc3Rpb25zXG4gIH0pXG5cbiAgJHNjb3BlLmdldFF1ZXN0aW9uQnlJZCA9IGZ1bmN0aW9uIChpZCl7XG4gICAgUXVlc3RTdmMuZmV0Y2hCeUlkKGlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICRzY29wZS5xdWVzdCA9IHJlc3BvbnNlO1xuICAgIH0pXG4gIH1cblxuICAkc2NvcGUuYWRkQW5zd2VyID0gZnVuY3Rpb24oKXtcbiAgICBjb25zb2xlLmxvZyhcImFuc3dlcmluZ1wiKTtcbiAgfVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1F1ZXN0U3ZjJywgZnVuY3Rpb24gKCRodHRwKSB7XG4gIHRoaXMuZmV0Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9xdWVzdGlvbnMnKVxuICB9XG4gIFxuICB0aGlzLmZldGNoQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcXVlc3Rpb25zLycgKyBpZClcbiAgfVxuXG4gIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24gKHF1ZXN0KSB7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcXVlc3Rpb25zJywgcXVlc3QpXG4gIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdSZWdpc3RlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU3ZjKSB7XG4gICRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICBVc2VyU3ZjLnJlZ2lzdGVyKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicsIHVzZXIpXG4gICAgfSlcbiAgfVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgJHJvdXRlUHJvdmlkZXJcbiAgLndoZW4oJy8nLCAgICAgICAgIHsgY29udHJvbGxlcjogJ1F1ZXN0Q3RybCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9xdWVzdGlvbnMuaHRtbCcgfSlcbiAgLndoZW4oJy9yZWdpc3RlcicsIHsgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ3RybCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9yZWdpc3Rlci5odG1sJyB9KVxuICAud2hlbignL2xvZ2luJywgICAgeyBjb250cm9sbGVyOiAnTG9naW5DdHJsJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2xvZ2luLmh0bWwnIH0pXG4gIC53aGVuKCcvYXNrJywgICAgICB7IGNvbnRyb2xsZXI6ICdRdWVzdEN0cmwnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvYXNrLmh0bWwnIH0pXG4gIC53aGVuKCcvcXVlc3Rpb25zLzpxdWVzdElkJywgICAgeyBjb250cm9sbGVyOiAnU2luZ2xlUXVlc3RDdHJsJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3F1ZXN0Lmh0bWwnIH0pXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignU2luZ2xlUXVlc3RDdHJsJywgWyckc2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJ1NpbmdsZVF1ZXN0U3ZjJywgJyRsb2NhdGlvbicsXG4gIGZ1bmN0aW9uKCRzY29wZSwgJHJvdXRlUGFyYW1zLCBTaW5nbGVRdWVzdFN2YywgJGxvY2F0aW9uKSB7XG5cbiAgICBTaW5nbGVRdWVzdFN2Yy5mZXRjaEJ5SWQoJHJvdXRlUGFyYW1zLnF1ZXN0SWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpXG4gICAgICAkc2NvcGUucXVlc3QgPSByZXNwb25zZS5kYXRhO1xuICAgIH0pXG5cbiAgICAkc2NvcGUuYWRkQW5zd2VyID0gZnVuY3Rpb24oKXtcbiAgICAgIGNvbnNvbGUubG9nKFwiYW5zd2VyaW5nXCIpO1xuICAgIH1cbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnU2luZ2xlUXVlc3RTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcblxuICB0aGlzLmZldGNoQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcXVlc3Rpb25zLycgKyBpZClcbiAgfVxuXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnVXNlclN2YycsIGZ1bmN0aW9uICgkaHR0cCkge1xuICB2YXIgc3ZjID0gdGhpc1xuICBzdmMuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJylcbiAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhXG4gICAgfSlcbiAgfVxuICBzdmMubG9naW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLCB7XG4gICAgICB1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW4gPSByZXNwb25zZS5kYXRhXG4gICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsneC1hdXRoJ10gPSByZXNwb25zZS5kYXRhXG4gICAgICByZXR1cm4gc3ZjLmdldFVzZXIoKVxuICAgIH0pXG4gIH1cbiAgc3ZjLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmRcbiAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBzdmMubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKVxuICAgIH0pXG4gIH1cbiAgc3ZjLmlzTG9nZ2VkSW4gPSBmdW5jdGlvbiAoKXtcbiAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgaWYod2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuKXtcbiAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyd4LWF1dGgnXSA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS50b2tlblxuICAgICAgcmVzdWx0ID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufSlcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==